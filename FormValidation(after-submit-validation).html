<!DOCTYPE html>
<html>
    <head>
        <title>Form Validation</title>
        <meta charset = UTF-8>
        <link rel="stylesheet" href="FormValidation.css">
    </head>
    <body>
        
        <header>
            <div id = "nav" >
                <div id="SchoolName">Solicode &#60\&#62</div>
                <div id="SchoolDomain">Programming school</div>
            </div>
            
        </header>

        <div id="Form">
            <form name="formulaire" id="container">
                <input type="text" name="FamilyName" placeholder="Last name" id="infoFamilyname">
                <p id="familynameErrorMessage"></p>
                <input type="text" name="Name" placeholder="Name" id="infoName">
                <p id="nameErrorMessage"></p>
                <input type="text" name="Email" placeholder="E-mail" id="infoEmail">
                <p id="emailErrorMessage"></p>
                <input type="text" name="Téléphone" placeholder="Phone number" id="infoPhonenumber">
                <p id="PhonenumberErrorMessage"></p>
            </form>
                
            <div id="genre">
                <label for="Masculin">Masculin</label>
                <input type="radio" value="Masculin" name="Genre" id="masculin">
                <label for="Féminin">Féminin</label>
                <input type="radio" value="Féminin" name="Genre" id="feminin">
                <p id ="ErrorMessage"></p>
            </div>
                
            
            <div id="groupe">
                <label for="DW101">DW 101</label>
                <input type="radio" value="DW101" name="groupe" id="groupe1">
                <label for="DW102">DW 102</label>
                <input type="radio" value="DW102" name="groupe" id="groupe2">
                <label for="DW103">DW 103</label>
                <input type="radio" value="DW103" name="groupe" id="groupe3">
                <label for="DM101">DM 101</label>
                <input type="radio" value="DM101" name="groupe" id="groupe4">
                <label for="DM102">DM 102</label>
                <input type="radio" value="DM102" name="groupe" id="groupe5">
                <p id="GroupErrorMessage"></p>
            </div>
                
                <label for="Groupes">Choisissez un groupe:</label>
                <select name="Groupes" id="Liste" multiple>
                    <option value="Informatique">Informatique</option>
                    <option value="Robotique">Robotique</option>
                    <option value="Jeu d'echecs">Jeu d'echecs</option>
                    <option value="Théatre">Théatre</option>
                    <option value="Musique">Musique</option>
                    <option value="Foot">Foot</option>
                </select>
            
            <p id = "resultatclubselection"></p>

            
            <button id="submit">Submit</button>

        </div>
        <script>
            document.getElementById("submit").addEventListener('click', function ValidateForm() {

                let familyname = document.formulaire.FamilyName.value
                let name = document.formulaire.Name.value
                let checkName = /^[a-z]{1,30}$/
                let email = document.formulaire.Email.value
                let checkEmail = /\w\.\w+(@ofppt\.ma$)/
                let phoneNumber = document.formulaire.Téléphone.value
                let checkNumber = /(^05|^06|^07)\d{8}$/
                let clubSelection = []
                let clubListe = document.getElementById("Liste")
                let a = true

                
                if(!checkName.test(familyname))
                    {
                        document.getElementById("infoFamilyname").style.borderColor = "red";
                        document.getElementById("familynameErrorMessage").innerHTML = "Le nom doit être entre 1 et 30 caractères"
                        a = false
                    }
                    else
                    {
                        document.getElementById("familynameErrorMessage").innerHTML = ""
                        document.getElementById("infoFamilyname").style.borderColor = "green";
                    }
                if(!checkName.test(name))
                    {
                        document.getElementById("infoName").style.borderColor = "red";
                        document.getElementById("nameErrorMessage").innerHTML = "Le prénom doit être entre 1 et 30 caractères"
                        a = false
                    }
                    else
                    {
                        document.getElementById("infoName").style.borderColor = "green";
                        document.getElementById("nameErrorMessage").innerHTML = ""

                    }

                if(!checkEmail.test(email))
                    {
                        document.getElementById("infoEmail").style.borderColor = "red";
                        document.getElementById("emailErrorMessage").innerHTML = "L'email doit être valide (Ex : prénom.nom@ofppt.ma)"

                        a = false
                    }
                    else
                    {
                        document.getElementById("infoEmail").style.borderColor = "green";
                        document.getElementById("emailErrorMessage").innerHTML = ""
                    }

                if(!checkNumber.test(phoneNumber))
                    {

                        document.getElementById("infoPhonenumber").style.borderColor = "red";
                        document.getElementById("PhonenumberErrorMessage").innerHTML = "Rentrez un numéro valide"

                        a = false
                    }
                    else
                    {
                        document.getElementById("infoPhonenumber").style.borderColor = "green";
                        document.getElementById("PhonenumberErrorMessage").innerHTML = ""

                    }
                if (document.getElementById("masculin").checked == false && document.getElementById("feminin").checked == false) 
                    {
                        document.getElementById("ErrorMessage").innerHTML = "Choisissez une option"
                        a = false
                    }
                    else
                    {
                        document.getElementById("ErrorMessage").innerHTML = ""
                    }
                if (document.getElementById("groupe1").checked == false && document.getElementById("groupe2").checked == false && document.getElementById("groupe3").checked == false && document.getElementById("groupe4").checked == false && document.getElementById("groupe5").checked == false) 
                    {
                        document.getElementById("GroupErrorMessage").innerHTML = "Choisissez une option"
                        a = false
                    }
                    else
                    {
                        document.getElementById("GroupErrorMessage").innerHTML = ""
                    }

                    for (let i = 0; i < clubListe.options.length; i++)
                        {
                            if(clubListe.options[i].selected)
                                {
                                    clubSelection.push(clubListe.options[i])
                                }
                        }
                    if(clubSelection.length < 1)
                     {
                        document.getElementById("resultatclubselection").innerHTML = "Choisissez au moins un club"
                        a = false
                     }
                        else if(clubSelection.length > 3)
                            {
                                document.getElementById("resultatclubselection").innerHTML = "Vous avez le droit de vous inscrire a un maximum de 3 clubs"
                                a = false
                            }
                            else
                            {
                                document.getElementById("resultatclubselection").innerHTML = ""
                            }

                    if( a == true)
                    {
                        window.location.href = "confirmationpage.html"
                    }

                })
        </script>

    </body>
</html>